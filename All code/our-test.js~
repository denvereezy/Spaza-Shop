var assert = require("assert");

describe("Find data in file", function(){


    it('should return a unique list of product names in the file asynchronously', function(done){

        var Products = require("./products");
        var products = new Products('./Nelisa Sales History.csv');
        products.productNames(function(err, products){
            assert.deepEqual(["Milk", "Imasi", "Bread","Chakalaka can","Gold Dish Vegetable Curry  Can","Fanta 500ml","Coke 500ml","Cream Soda 500ml","Iwisa Pap 5kg","Top Class Soya Mince","Shampoo 1l","Soap Bar","Bananas - loose","Apples","Mixed Sweets 5s","Heart Chocolates","Rose (plastic)","Valentine Cards"], products);

            done();
        });

    });

    it('should return the total number of items sold for each product', function(done){
        var Products = require("./products");

        var products = new Products('./files/products.csv');
        products.productsSold(function(err, products){

            assert.equal(142, products['Milk']);
            assert.equal(125, products['Imasi']);
            assert.equal(130, products['Bread']);
            assert.equal(94, products['Chakalaka Can']);
            assert.equal(86, products['Gold Dish Veg Curry']);
            assert.equal(94, products['Fanta 500ml']);
            assert.equal(159, products['Coke 500ml']);
            assert.equal(75, products['Cream soda 500ml']);
            assert.equal(47, products['Iwisa Pap 5kg']);
            assert.equal(98, products['Top Class Soya Mince']);
            assert.equal(26, products['Shampoo 1l']);
            assert.equal(50, products['Soap Bar']);
            assert.equal(114, products['Bananas loose']);
            assert.equal(114, products['Apples']);
            assert.equal(172, products['Mixed sweets 5s']);
            assert.equal(20, products['Heart choc']);
            assert.equal(14, products['Rose (plastic)']);
            assert.equal(14, products['Valentine Cards']);      

            done();
        });

    });
});
